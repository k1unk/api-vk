(function(){"use strict";var e={3510:function(e,s,r){r.d(s,{Z:function(){return He}});var t=r(9963),n=r(6252);function i(e,s,r,t,i,o){const a=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(a)])}const o={class:"users"},a={class:"wrapper"};function d(e,s,r,t,i,d){const u=(0,n.up)("UsersFavourite"),c=(0,n.up)("UsersSearch"),l=(0,n.up)("Friends");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n._)("div",a,[(0,n.Wm)(u),(0,n.Wm)(c),(0,n.Wm)(l)])])}const u={class:"favourite"},c=(0,n._)("div",{class:"header"},"Избранные пользователи",-1),l={key:0,class:"list"},f={key:1,class:"no-users"};function m(e,s,r,t,i,o){const a=(0,n.up)("UsersFavouriteItem");return(0,n.wg)(),(0,n.iD)("div",u,[c,e.users.length>0?((0,n.wg)(),(0,n.iD)("div",l,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.users,(e=>((0,n.wg)(),(0,n.j4)(a,{key:e.id,user:e},null,8,["user"])))),128))])):((0,n.wg)(),(0,n.iD)("div",f,"У вас пока что нет избранных пользователей"))])}var p=r(3907),v=r(3577);const h={class:"item"},g={class:"name"},w={class:"options"},_=(0,n._)("p",null,"выбрать",-1),F=["checked"];function U(e,s,r,t,i,o){return(0,n.wg)(),(0,n.iD)("div",h,[(0,n._)("div",g,(0,v.zw)(i.firstName)+" "+(0,v.zw)(i.lastName),1),(0,n._)("div",w,[(0,n._)("label",null,[_,(0,n._)("input",{type:"checkbox",checked:i.selected,onClick:s[0]||(s[0]=s=>e.toggleSelected(i.id))},null,8,F)]),(0,n._)("div",{class:"remove",onClick:s[1]||(s[1]=s=>e.removeUser(i.id))},"удалить")])])}var N={name:"UsersFavouriteItem",components:{},props:{user:Object},data(){return{id:this.user.id,firstName:this.user.firstName,lastName:this.user.lastName,selected:this.user.selected}},methods:{...(0,p.OI)({toggleSelected:"users/toggleSelected",removeUser:"users/removeUser"})}},k=r(3744);const y=(0,k.Z)(N,[["render",U]]);var b=y;const D={class:"friends"},I=(0,n._)("p",null,"Построить единый список друзей ",-1),j=(0,n._)("p",null,"избранных пользователей",-1),x={class:"select"},S=(0,n._)("option",null,"Имя А-Я",-1),z=(0,n._)("option",null,"Имя Я-А",-1),O=(0,n._)("option",null,"Фамилия А-Я",-1),C=(0,n._)("option",null,"Фамилия Я-А",-1),$=[S,z,O,C];function Z(e,s,r,i,o,a){const d=(0,n.up)("Friend");return(0,n.wg)(),(0,n.iD)("div",D,[I,j,(0,n._)("div",{class:"button",onClick:s[0]||(s[0]=(...s)=>e.findFriends&&e.findFriends(...s))},"ПОСТРОИТЬ"),(0,n._)("div",x,[(0,n.Uk)(" Сортировать по: "),(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>o.option=e)},$,512),[[t.bM,o.option]])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.friends.sort(((e,s)=>"Имя А-Я"===o.option?(e.firstName+e.lastName).localeCompare(s.firstName+s.lastName):"Имя Я-А"===o.option?(s.firstName+s.lastName).localeCompare(e.firstName+e.lastName):"Фамилия А-Я"===o.option?(e.lastName+e.firstName).localeCompare(s.lastName+s.firstName):"Фамилия Я-А"===o.option?(s.lastName+s.firstName).localeCompare(e.lastName+e.firstName):void 0)),(e=>((0,n.wg)(),(0,n.j4)(d,{onClick:s=>a.openFriend(e.id),friend:e},null,8,["onClick","friend"])))),256))])}r(7658);const E={class:"photo-and-name"},G=["src"],Q={class:"name"},M={class:"age"},P={class:"sex"};function T(e,s,r,t,i,o){return(0,n.wg)(),(0,n.iD)("div",{class:"friend",style:(0,v.j5)(o.cssProps)},[(0,n._)("div",E,[(0,n._)("img",{src:r.friend.photo},null,8,G),(0,n._)("div",Q,[(0,n._)("p",null,(0,v.zw)(r.friend.firstName),1),(0,n._)("p",null,(0,v.zw)(r.friend.lastName),1)])]),(0,n._)("div",M,"Возраст: "+(0,v.zw)(r.friend.age?r.friend.age:"не указан"),1),(0,n._)("div",P,"Пол: "+(0,v.zw)("M"===r.friend.sex?"Мужской":"Женский"),1)],4)}var Y={name:"Friends",components:{},props:{friend:Object},computed:{cssProps(){return{"--color":"rgb("+(100+50*this.friend.counter)+","+(100+50*this.friend.counter)+","+(100+50*this.friend.counter)+")"}}}};const H=(0,k.Z)(Y,[["render",T]]);var K=H,J={name:"Friends",components:{Friend:K},data(){return{option:"Имя А-Я"}},computed:{...(0,p.rn)({friends:e=>e.users.friends})},methods:{openFriend(e){He.push(`friend/${e}`),this.setFriends(e)},...(0,p.nv)({setFriends:"users/setFriends",findFriends:"users/findFriends"})}};const W=(0,k.Z)(J,[["render",Z]]);var B=W,A={name:"UsersFavourite",components:{UsersFavouriteItem:b,Friends:B},data(){return{searchQuery:""}},methods:{...(0,p.nv)({getUsers:"users/getUsers",findFriends:"users/findFriends"})},computed:{...(0,p.rn)({users:e=>e.users.usersFavourite,friends:e=>e.users.friends,s:e=>e})}};const L=(0,k.Z)(A,[["render",m]]);var R=L;const V={class:"search"},X={class:"searchForm"},q={class:"list"};function ee(e,s,r,i,o,a){const d=(0,n.up)("UsersSearchItem");return(0,n.wg)(),(0,n.iD)("div",V,[(0,n._)("div",X,[(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>o.searchQuery=e),placeholder:"Поиск..."},null,512),[[t.nr,o.searchQuery]]),(0,n._)("div",{class:"button",onClick:s[1]||(s[1]=(...e)=>a.searchUsers_&&a.searchUsers_(...e))}," Найти ")]),(0,n._)("div",q,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.users,(e=>((0,n.wg)(),(0,n.j4)(d,{key:e.id,user:e},null,8,["user"])))),128))])])}const se={class:"item"},re={class:"info"},te={class:"name"},ne={class:"id"};function ie(e,s,r,t,i,o){return(0,n.wg)(),(0,n.iD)("div",se,[(0,n._)("div",re,[(0,n._)("div",te,(0,v.zw)(i.firstName)+" "+(0,v.zw)(i.lastName),1),(0,n._)("div",ne,"id: "+(0,v.zw)(i.id),1)]),(0,n._)("div",{class:"button",onClick:s[0]||(s[0]=s=>e.addUserFavourite({id:i.id,firstName:i.firstName,lastName:i.lastName}))}," Добавить в избранное ")])}var oe={name:"UsersSearchItem",components:{},props:{user:Object},data(){return{id:this.user.id,firstName:this.user.first_name,lastName:this.user.last_name}},methods:{...(0,p.OI)({addUserFavourite:"users/addUserFavourite"})}};const ae=(0,k.Z)(oe,[["render",ie]]);var de=ae,ue={name:"UsersSearch",components:{UsersSearchItem:de},data(){return{searchQuery:""}},methods:{...(0,p.nv)({getUsers:"users/getUsers",searchUsers:"users/searchUsers",findFriends:"users/findFriends"}),searchUsers_(){this.searchUsers(this.searchQuery)}},computed:{...(0,p.rn)({users:e=>e.users.usersSearch,friends:e=>e.users.friends})}};const ce=(0,k.Z)(ue,[["render",ee]]);var le=ce,fe={name:"Users",components:{UsersSearch:le,UsersFavourite:R,Friends:B},data(){},methods:{}};const me=(0,k.Z)(fe,[["render",d]]);var pe=me,ve={name:"App",components:{Users:pe}};const he=(0,k.Z)(ve,[["render",i]]);var ge=he,we=r(2201),_e=r(4144),Fe=r.n(_e);const Ue="https://api.vk.com/method";let Ne="vk1.a.2zR5mgYficCUjByL-_ZVI6rdQGMi-SgcoiAujoXG4YaJfGcxB-J0lY89DUkQgUABXJ9699qbR2XW_O_u672QWuNfsyzLgLmh9ovHu22sySSMGZ2kugpES7Kcz40vHksdICiJbhrv1-pQnDEAxyJ3p8a_Pl1K92Rjiqz1nY-B_7ua0Kw0NVp4HkEGyCx8R3ewD4IJEmyxSXxd2BcPDQaFMg",ke=e=>e?Math.floor((new Date-new Date(e).getTime())/315576e5):"";const ye={state:()=>({usersFavourite:[],usersSearch:[],friends:[],friendInfo:{info:{},friends:[],posts:[]}}),getters:{getUsersFavourite(e){return e.usersFavourite}},mutations:{setUsersFavourite(e,s){e.usersFavourite=s},addUserFavourite(e,{id:s,firstName:r,lastName:t}){e.usersFavourite.push({id:s,firstName:r,lastName:t,selected:!1})},removeUser(e,s){let r=[];for(let t=0;t<e.usersFavourite.length;t++)e.usersFavourite[t].id!==s&&r.push(e.usersFavourite[t]);e.usersFavourite=r},toggleSelected(e,s){for(let r=0;r<e.usersFavourite.length;r++)e.usersFavourite[r].id===s&&(e.usersFavourite[r].selected=!e.usersFavourite[r].selected)},setUsersSearch(e,s){e.usersSearch=s},setFriends(e,s){let r=s.map((e=>({id:e.id,counter:e.counter,firstName:e.first_name,lastName:e.last_name,sex:2===e.sex?"M":"F",age:ke(e.bdate),photo:e.photo_100})));e.friends=r},setFriendInfo(e,{info:s,friends:r,posts:t}){e.friendInfo.info=s,e.friendInfo.friends=r,e.friendInfo.posts=t}},actions:{async setFriends(e,s){let r=`${Ue}/friends.get?v=5.81&access_token=${Ne}&user_id=${s}&fields=sex,bdate,city,photo_100`,t=await Fe()(r,{mode:"no-cors",method:"GET"}),n=await t.json(),i=await n.response.items,o=[];for(let u=0;u<i.length;u++)for(let s=0;s<e.getters.getUsersFavourite.length;s++)e.getters.getUsersFavourite[s].id===i[u].id&&o.push(i[u]);r=`${Ue}/wall.get?v=5.81&access_token=${Ne}&owner_id=${s}`,t=await Fe()(r,{mode:"no-cors",method:"GET"}),n=await t.json();let a=await n.response.items;r=`${Ue}/users.get?v=5.81&access_token=${Ne}&user_ids=${s}`,t=await Fe()(r,{mode:"no-cors",method:"GET"}),n=await t.json();let d=await n.response[0];e.commit("setFriendInfo",{info:d,friends:o,posts:a})},async searchUsers(e,s){const r=`${Ue}/users.search?v=5.81&access_token=${Ne}&q=${s}&count=10&offset=0`;let t=await Fe()(r,{mode:"no-cors",method:"GET"}),n=await t.json(),i=await n.response.items;i.map((e=>(e.selected=!1,e))),e.commit("setUsersSearch",i)},async findFriends({commit:e,getters:s}){let r=[];for(const i of s.getUsersFavourite)if(i.selected){let e=i.id;const s=`${Ue}/friends.get?v=5.81&access_token=${Ne}&user_id=${e}&fields=sex,bdate,city,photo_100`;let t=await Fe()(s,{mode:"no-cors",method:"GET"}),n=await t.json(),o=await n.response.items;for(const i of o)r.push(i)}r.sort(((e,s)=>e.id-s.id));let t=[],n=0;for(let i=0;i<r.length;i++){let e=r[i];n===r[i].id?t[t.length-1].counter+=1:(e.counter=1,t.push(e)),n=r[i].id}e("setFriends",t)}},namespaced:!0};var be=(0,p.MT)({modules:{users:ye}}),De=r(8139);const Ie={class:"friend-page"},je={class:"wrapper"},xe={class:"info"},Se={class:"friends"},ze={class:"friend-item"},Oe={class:"posts"},Ce=(0,n._)("p",null,"Посты",-1),$e={class:"post"},Ze={class:"date"},Ee={class:"text"};function Ge(e,s,r,t,i,o){return(0,n.wg)(),(0,n.iD)("div",Ie,[(0,n._)("div",je,[(0,n._)("div",xe,(0,v.zw)(e.friendInfo.info.first_name)+" "+(0,v.zw)(e.friendInfo.info.last_name),1),(0,n._)("div",Se,[(0,n.Uk)(" Друзья, выбранные в избранном: "),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.friendInfo.friends,(e=>((0,n.wg)(),(0,n.iD)("div",ze,(0,v.zw)(e.first_name)+" "+(0,v.zw)(e.last_name),1)))),256))]),(0,n._)("div",Oe,[Ce,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.friendInfo.posts,(e=>((0,n.wg)(),(0,n.iD)("div",$e,[(0,n._)("div",Ze,"Дата: "+(0,v.zw)(new Date(1e3*e.date).toLocaleDateString()),1),(0,n._)("div",Ee,"Текст: "+(0,v.zw)(e.text?e.text:"отсутствует"),1)])))),256))])])])}var Qe={name:"FriendPage",components:{},computed:{...(0,p.rn)({friends:e=>e.users.friends,friendInfo:e=>e.users.friendInfo})},methods:{}};const Me=(0,k.Z)(Qe,[["render",Ge]]);var Pe=Me;const Te=[{path:"/",component:pe},{path:"/friend/:id",component:Pe}],Ye=(0,we.p7)({routes:Te,history:(0,we.PO)("/api-vk/")});var He=Ye;(0,t.ri)(ge).use(De.ZP).use(Ye).use(be).mount("#app")}},s={};function r(t){var n=s[t];if(void 0!==n)return n.exports;var i=s[t]={exports:{}};return e[t].call(i.exports,i,i.exports,r),i.exports}r.m=e,function(){var e=[];r.O=function(s,t,n,i){if(!t){var o=1/0;for(c=0;c<e.length;c++){t=e[c][0],n=e[c][1],i=e[c][2];for(var a=!0,d=0;d<t.length;d++)(!1&i||o>=i)&&Object.keys(r.O).every((function(e){return r.O[e](t[d])}))?t.splice(d--,1):(a=!1,i<o&&(o=i));if(a){e.splice(c--,1);var u=n();void 0!==u&&(s=u)}}return s}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[t,n,i]}}(),function(){r.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(s,{a:s}),s}}(),function(){r.d=function(e,s){for(var t in s)r.o(s,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){var e={143:0};r.O.j=function(s){return 0===e[s]};var s=function(s,t){var n,i,o=t[0],a=t[1],d=t[2],u=0;if(o.some((function(s){return 0!==e[s]}))){for(n in a)r.o(a,n)&&(r.m[n]=a[n]);if(d)var c=d(r)}for(s&&s(t);u<o.length;u++)i=o[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(c)},t=self["webpackChunkapi_vk"]=self["webpackChunkapi_vk"]||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))}();var t=r.O(void 0,[998],(function(){return r(3510)}));t=r.O(t)})();
//# sourceMappingURL=app.1b859784.js.map